!function(){"use strict";class e{composeAction;element;elementAttr;children;parent;data;constructor(){this.composeAction=()=>{},this.element=null,this.elementAttr=null,this.parent=null,this.children={}}compose(e,...t){const n=this.getCallMark();return(this.children[n]??this.scoped(n,e)).composeAction(...t)}getCallMark(e=3){const t=(new Error).stack?.split("\n").map((e=>e.trim()));return t[e]}remember(e){if(!this.data){const t=e();this.data=new Proxy(t,{get:(e,t,n)=>Reflect.get(e,t,n),set:(e,t,n)=>{console.log("remember set",this.composeAction);const s=Reflect.set(e,t,n);return this.clear(),this.composeAction(),s}})}return this.data}scoped(t,n){const s=new e;return s.parent=this,s.composeAction=(...e)=>(s.element&&s.elementAttr&&function(e,t){if(t.class instanceof Array?e.className=t.class.map((e=>`.${e}`)).join(" "):"string"==typeof t.class&&(e.className=t.class),t.style instanceof Object)for(let n of Object.keys(t.style))e.style[n]=t.style[n];for(let n of Object.keys(t))if(n.startsWith("on")){const s=n.toLowerCase().substring(2),l=t[n];e.addEventListener(s,l)}}(s.element,s.elementAttr),console.log("children",s.children),n(s,...e)),this.children[t]=s,s}view(e,t,n,s){const l=`${this.getCallMark()}-${s}`;let o=this.children[l];if(!o){const t=document.createElement(e);o=this.scoped(l,n),o.element=t;let s=this;for(;null!=s&&!s.element;)s=s.parent;s?.element?.appendChild(t)}return o.elementAttr=t,o.composeAction()}text(e){this.element&&(this.element.innerHTML=e)}clear(){for(let e of Object.keys(this.children)){this.children[e].clear()}this.children={},this.element&&(this.parent?.element?.removeChild(this.element),this.element=null)}}const t={app(t,n){const s=document.body.querySelector(t),l=new e;l.element=s,l.composeAction=n,n(l)}};window.$v=t}();
//# sourceMappingURL=jque.min.js.map
